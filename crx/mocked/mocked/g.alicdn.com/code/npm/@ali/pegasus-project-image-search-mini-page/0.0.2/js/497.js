(self.webpackChunk_ali_pegasus_project_image_search_mini_page=self.webpackChunk_ali_pegasus_project_image_search_mini_page||[]).push([[497],{1497:function(t,e,n){n.d(e,{Z:function(){return k}});var i=n(5486),r=n(2661),o=n(1739),s=n(1543),a=n(5033),u=[];function c(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,i=this.intersectionRect,r=i.width*i.height;this.intersectionRatio=n?Number((r/n).toFixed(4)):this.isIntersecting?1:0}var h,d,l,f=function(){function t(e,n){var i=this;(0,s._)(this,t),this.THROTTLE_TIMEOUT=100,this.POLL_INTERVAL=null,this.USE_MUTATION_OBSERVER=!0,this._checkForIntersections=function(){var t=i._rootIsInDom(),e=t?i._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};i._observationTargets.forEach((function(n){var i=n.element,r=_(i),o=this._rootContainsTarget(i),s=n.entry,a=t&&o&&this._computeTargetAndRootIntersection(i,e),u=n.entry=new c({time:"undefined"!==typeof performance&&performance.now?performance.now():Date.now(),target:i,boundingClientRect:r,rootBounds:e,intersectionRect:a});s?t&&o?this._hasCrossedThreshold(s,u)&&this._queuedEntries.push(u):s&&s.isIntersecting&&this._queuedEntries.push(u):this._queuedEntries.push(u)}),i),i._queuedEntries.length&&i._callback(i.takeRecords(),i)};var r=n||{};if("function"!=typeof e)throw new Error("callback must be a function");if(r.root&&1!=r.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=function(t,e){var n=null;return function(){n||(n=setTimeout((function(){t(),n=null}),e))}}(this._checkForIntersections,this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(r.rootMargin),this.thresholds=this._initThresholds(r.threshold),this.root=r.root||null,this.rootMargin=this._rootMarginValues.map((function(t){return t.value+t.unit})).join(" ")}return(0,a._)(t,[{key:"observe",value:function(t){if(!this._observationTargets.some((function(e){return e.element===t}))){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}}},{key:"unobserve",value:function(t){this._observationTargets=this._observationTargets.filter((function(e){return e.element!==t})),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())}},{key:"disconnect",value:function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()}},{key:"takeRecords",value:function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t}},{key:"_initThresholds",value:function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter((function(t,e,n){if("number"!=typeof t||Number.isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]}))}},{key:"_parseRootMargin",value:function(t){var e=(t||"0px").split(/\s+/).map((function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}}));return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e}},{key:"_monitorIntersections",value:function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(p(window,"resize",this._checkForIntersections,!0),p(document,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in window&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))}},{key:"_unmonitorIntersections",value:function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,v(window,"resize",this._checkForIntersections,!0),v(document,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))}},{key:"_computeTargetAndRootIntersection",value:function(t,e){if("none"!=window.getComputedStyle(t).display){for(var n=_(t),i=b(t),r=!1;!r;){var o=null,s=1==i.nodeType?window.getComputedStyle(i):{};if("none"===s.display)return;if(i===this.root||i===document?(r=!0,o=e):i!==document.body&&i!==document.documentElement&&"visible"!==s.overflow&&(o=_(i)),o&&!(n=g(o,n)))break;i=b(i)}return n}}},{key:"_getRootRect",value:function(){var t;if(this.root)t=_(this.root);else{var e=document.documentElement,n=document.body;t={top:0,left:0,right:e.clientWidth||n.clientWidth,width:e.clientWidth||n.clientWidth,bottom:e.clientHeight||n.clientHeight,height:e.clientHeight||n.clientHeight}}return this._expandRectByRootMargin(t)}},{key:"_expandRectByRootMargin",value:function(t){var e=this._rootMarginValues.map((function(e,n){return"px"===e.unit?e.value:e.value*(n%2?t.width:t.height)/100})),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n}},{key:"_hasCrossedThreshold",value:function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,i=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==i)for(var r=0;r<this.thresholds.length;r++){var o=this.thresholds[r];if(o==n||o==i||o<n!==o<i)return!0}}},{key:"_rootIsInDom",value:function(){return!this.root||m(document,this.root)}},{key:"_rootContainsTarget",value:function(t){return m(this.root||document,t)}},{key:"_registerInstance",value:function(){u.indexOf(this)<0&&u.push(this)}},{key:"_unregisterInstance",value:function(){var t=u.indexOf(this);-1!==t&&u.splice(t,1)}}]),t}();function p(t,e,n,i){"function"==typeof t.addEventListener?t.addEventListener(e,n,i||!1):"function"==typeof t.attachEvent&&t.attachEvent("on".concat(e),n)}function v(t,e,n,i){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,i||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on".concat(e),n)}function g(t,e){var n=Math.max(t.top,e.top),i=Math.min(t.bottom,e.bottom),r=Math.max(t.left,e.left),o=Math.min(t.right,e.right),s=o-r,a=i-n;return s>=0&&a>=0&&{top:n,bottom:i,left:r,right:o,width:s,height:a}}function _(t){var e;try{e=t.getBoundingClientRect()}catch(n){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function m(t,e){for(var n=e;n;){if(n===t)return!0;n=b(n)}return!1}function b(t){var e=t.parentNode;return e&&11==e.nodeType&&e.host?e.host:e&&e.assignedSlot?e.assignedSlot.parentNode:e}!function(t){t.appear="appear",t.disappear="disappear"}(h||(h={})),function(t){t.up="up",t.down="down"}(d||(d={}));var w="undefined"!==typeof window&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?window.IntersectionObserver:f,y={root:null,rootMargin:"0px",threshold:function(t){for(var e=[],n=0;n<10;n++)e.push(n/10);return e}()};function I(t){t.forEach((function(t){var e=t.target,n=t.boundingClientRect,i=t.intersectionRatio,r=n.y||n.top,o=parseInt(e.getAttribute("data-before-current-y"),10)||r;i>.01&&!R(e.getAttribute("data-appeared"))&&!E(e,h.appear)?(e.setAttribute("data-appeared","true"),e.setAttribute("data-has-appeared","true"),e.dispatchEvent(T(h.appear,{direction:r>o?d.up:d.down}))):0===i&&R(e.getAttribute("data-appeared"))&&!E(e,h.disappear)&&(e.setAttribute("data-appeared","false"),e.setAttribute("data-has-disappeared","true"),e.dispatchEvent(T(h.disappear,{direction:r>o?d.up:d.down}))),e.setAttribute("data-before-current-y",String(r))}))}function E(t,e){var n=R(t.getAttribute("isonce"))||R(t.getAttribute("data-once")),i=e===h.appear?"data-has-appeared":"data-has-disappeared";return n&&R(t.getAttribute(i))}function R(t){return t&&"false"!==t}function T(t,e){return new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:e})}var k=function(t){var e=t.onAppear,n=t.onDisappear,s=t.children,a=(0,o.useRef)(),u=s.ref&&"object"===typeof s.ref?s.ref:a;(0,o.useEffect)((function(){"function"===typeof s.ref&&s.ref(u.current)}),[u,s]);var c=(0,o.useCallback)((function(t,e){var n,i=u.current;if(i&&"function"===typeof e){var r=i._nativeNode||i;n=r,l||function(){l=new w(I,arguments.length>0&&void 0!==arguments[0]?arguments[0]:y)}(),n===document&&(n=document.documentElement),l.observe(n),r.addEventListener(t,e)}return function(){var n=u.current;n&&(n._nativeNode||n).removeEventListener(t,e)}}),[u]);return(0,o.useEffect)((function(){return c(h.appear,e)}),[u,e,c]),(0,o.useEffect)((function(){return c(h.disappear,n)}),[u,n,c]),o.Children.only((0,r._)((0,i._)({},s),{ref:u}))}}}]);